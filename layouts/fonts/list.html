{{- define "main" }}

<!-- Page Header -->
<section class="page-header-section">
    <div class="section-container">
        <div class="page-header-content">
            <h1>免费字体库</h1>
            <p>{{ .Description | default "精选可商用免费字体，让设计创作零风险" }}</p>
        </div>
    </div>
</section>

<!-- Category Filter -->
<section class="filter-section">
    <div class="section-container">
        <div class="category-filter-bar">
            <span class="filter-label">按分类筛选：</span>
            <div class="filter-tags">
                <a href="/fonts/" class="filter-btn active">全部</a>
                <a href="/tags/黑体/" class="filter-btn">黑体</a>
                <a href="/tags/宋体/" class="filter-btn">宋体</a>
                <a href="/tags/楷体/" class="filter-btn">楷体</a>
                <a href="/tags/手写/" class="filter-btn">手写体</a>
                <a href="/tags/可商用/" class="filter-btn filter-btn-green">可商用</a>
            </div>
        </div>
    </div>
</section>

<!-- Font Grid -->
<section class="fonts-grid-section">
    <div class="section-container">
        <div class="font-grid">
            {{- $pages := .RegularPages }}
            {{- range $pages }}
            {{- $mainTitle := .Title }}
            {{- $engName := "" }}
            
            {{- if (findRE " - " .Title) }}
                {{- $mainTitle = index (split .Title " - ") 0 }}
            {{- end }}
            
            {{- if (findRE "\\(.*\\)" $mainTitle) }}
                {{- $engName = index (findRE "\\(([^)]+)\\)" $mainTitle) 0 | replaceRE "[\\(\\)]" "" }}
                {{- $mainTitle = replaceRE "\\s*\\(.*\\)" "" $mainTitle | strings.TrimSpace }}
            {{- end }}
            
            <article class="font-card">
                <a href="{{ .Permalink }}" class="font-card-link">
                    <div class="font-preview">
                        <span>Aa</span>
                    </div>
                    <div class="font-info">
                        <div class="font-header">
                            <div class="font-title-group">
                                <h3 class="font-title">{{ $mainTitle }}</h3>
                                {{- if $engName }}
                                <p class="font-en">{{ $engName }}</p>
                                {{- end }}
                            </div>
                            <span class="badge badge-green">免费商用</span>
                        </div>
                        <p class="font-desc">{{ .Description | truncate 80 }}</p>
                        <div class="font-tags">
                            {{- range first 3 .Params.tags }}
                            <span class="font-tag">{{ . }}</span>
                            {{- end }}
                        </div>
                        <div class="font-actions">
                            <span class="btn-sm btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                                查看详情
                            </span>
                        </div>
                    </div>
                </a>
            </article>
            {{- end }}
        </div>

        <!-- Pagination -->
        {{- if .Paginator }}
        {{- if gt .Paginator.TotalPages 1 }}
        <div class="pagination-wrapper">
            <nav class="pagination-nav">
                {{- if .Paginator.HasPrev }}
                <a class="pagination-btn" href="{{ .Paginator.Prev.URL | absURL }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    上一页
                </a>
                {{- else }}
                <span class="pagination-btn disabled">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    上一页
                </span>
                {{- end }}
                
                <span class="pagination-info">{{ .Paginator.PageNumber }} / {{ .Paginator.TotalPages }}</span>
                
                {{- if .Paginator.HasNext }}
                <a class="pagination-btn" href="{{ .Paginator.Next.URL | absURL }}">
                    下一页
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                </a>
                {{- else }}
                <span class="pagination-btn disabled">
                    下一页
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                </span>
                {{- end }}
            </nav>
        </div>
        {{- end }}
        {{- end }}
    </div>
</section>

{{- end }}
